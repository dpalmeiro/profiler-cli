
Flamegraph (focus: "CSSStyleSheet.replaceSync", marker: "Jank"):

CSSStyleSheet.replaceSync (8 samples)
└─ mozilla::dom::CSSStyleSheet_Binding::replaceSync(JSContext*, JS::Handle<JSObject*>, void*, JSJitMethodCallArgs const&) (8 samples)
   ├─ mozilla::StyleSheet::ReplaceSync(nsTSubstring<char> const&, mozilla::ErrorResult&) (7 samples)
   │  └─ Servo_StyleSheet_FromUTF8Bytes (7 samples)
   │     └─ style::stylesheets::stylesheet::StylesheetContents::from_str (7 samples)
   │        └─ style::stylesheets::stylesheet::Stylesheet::parse_rules (7 samples)
   │           └─ <cssparser::rules_and_declarations::StyleSheetParser<P> as core::iter::traits::iterator::Iterator>::next (7 samples)
   │              └─ cssparser::rules_and_declarations::parse_qualified_rule (7 samples)
   │                 ├─ cssparser::parser::parse_nested_block (5 samples)
   │                 │  └─ cssparser::parser::Parser::parse_entirely (5 samples)
   │                 │     └─ cssparser::rules_and_declarations::parse_qualified_rule::{{closure}} (5 samples)
   │                 │        └─ <style::stylesheets::rule_parser::TopLevelRuleParser as cssparser::rules_and_declarations::QualifiedRuleParser>::parse_block (5 samples)
   │                 │           └─ <style::stylesheets::rule_parser::NestedRuleParser as cssparser::rules_and_declarations::QualifiedRuleParser>::parse_block (5 samples)
   │                 │              ├─ style::stylesheets::rule_parser::NestedRuleParser::parse_nested (4 samples)
   │                 │              │  └─ style::stylesheets::rule_parser::NestedRuleParser::nest_for_rule (4 samples)
   │                 │              │     └─ style::stylesheets::rule_parser::NestedRuleParser::parse_nested::{{closure}} (4 samples)
   │                 │              │        └─ <cssparser::rules_and_declarations::RuleBodyParser<P,I,E> as core::iter::traits::iterator::Iterator>::next (4 samples)
   │                 │              │           ├─ cssparser::parser::parse_until_after (3 samples)
   │                 │              │           │  └─ cssparser::parser::parse_until_before (3 samples)
   │                 │              │           │     └─ cssparser::parser::Parser::parse_entirely (3 samples)
   │                 │              │           │        └─ <cssparser::rules_and_declarations::RuleBodyParser<P,I,E> as core::iter::traits::iterator::Iterator>::next::{{closure}} (3 samples)
   │                 │              │           │           └─ <style::stylesheets::rule_parser::NestedRuleParser as cssparser::rules_and_declarations::DeclarationParser>::parse_value (3 samples)
   │                 │              │           │              └─ style::properties::declaration_block::DeclarationParserState::parse_value (3 samples)
   │                 │              │           │                 └─ cssparser::parser::Parser::parse_until_before (3 samples)
   │                 │              │           │                    └─ cssparser::parser::parse_until_before (3 samples)
   │                 │              │           │                       └─ cssparser::parser::Parser::parse_entirely (3 samples)
   │                 │              │           │                          └─ style::properties::declaration_block::DeclarationParserState::parse_value::{{closure}} (3 samples)
   │                 │              │           │                             └─ style::properties::<impl style::properties::generated::PropertyDeclaration>::parse_into (3 samples)
   │                 │              │           │                                └─ style::properties::parse_non_custom_property_declaration_value_into (3 samples)
   │                 │              │           │                                   ├─ cssparser::parser::Parser::next (2 samples)
   │                 │              │           │                                   │  ├─ cssparser::parser::Parser::next_including_whitespace_and_comments (1 samples)
   │                 │              │           │                                   │  │  └─ cssparser::tokenizer::Tokenizer::next (1 samples)
   │                 │              │           │                                   │  │     └─ cssparser::tokenizer::next_token (1 samples) [self: 1]
   │                 │              │           │                                   │  └─ cssparser::parser::Parser::skip_whitespace (1 samples)
   │                 │              │           │                                   │     └─ core::option::Option<T>::take (1 samples)
   │                 │              │           │                                   │        └─ core::mem::replace (1 samples)
   │                 │              │           │                                   │           └─ core::ptr::read (1 samples) [self: 1]
   │                 │              │           │                                   └─ style::custom_properties::VariableValue::parse (1 samples)
   │                 │              │           │                                      └─ style::custom_properties::parse_declaration_value (1 samples)
   │                 │              │           │                                         └─ cssparser::parser::Parser::parse_until_before (1 samples)
   │                 │              │           │                                            └─ cssparser::parser::parse_until_before (1 samples)
   │                 │              │           │                                               └─ cssparser::parser::Parser::parse_entirely (1 samples)
   │                 │              │           │                                                  └─ style::custom_properties::parse_declaration_value::{{closure}} (1 samples)
   │                 │              │           │                                                     └─ style::custom_properties::parse_declaration_value_block (1 samples)
   │                 │              │           │                                                        └─ cssparser::parser::Parser::parse_nested_block (1 samples)
   │                 │              │           │                                                           └─ cssparser::parser::parse_nested_block (1 samples)
   │                 │              │           │                                                              └─ cssparser::parser::Parser::parse_entirely (1 samples)
   │                 │              │           │                                                                 └─ style::custom_properties::parse_declaration_value_block::{{closure}} (1 samples)
   │                 │              │           │                                                                    └─ cssparser::parser::Parser::expect_ident (1 samples)
   │                 │              │           │                                                                       └─ cssparser::parser::Parser::next (1 samples)
   │                 │              │           │                                                                          └─ cssparser::parser::Parser::next_including_whitespace_and_comments (1 samples)
   │                 │              │           │                                                                             └─ core::result::Result<T,E>::map_err (1 samples) [self: 1]
   │                 │              │           └─ cssparser::parser::Parser::next_including_whitespace_and_comments (1 samples)
   │                 │              │              └─ cssparser::tokenizer::Tokenizer::next (1 samples)
   │                 │              │                 └─ cssparser::tokenizer::next_token (1 samples)
   │                 │              │                    └─ cssparser::tokenizer::consume_ident_like (1 samples)
   │                 │              │                       └─ cssparser::tokenizer::consume_name (1 samples) [self: 1]
   │                 │              └─ alloc::vec::Vec<T,A>::push (1 samples)
   │                 │                 └─ alloc::raw_vec::RawVec<T,A>::grow_one (1 samples)
   │                 │                    └─ alloc::raw_vec::RawVecInner<A>::grow_one (1 samples)
   │                 │                       └─ alloc::raw_vec::RawVecInner<A>::grow_amortized (1 samples)
   │                 │                          └─ alloc::raw_vec::finish_grow (1 samples)
   │                 │                             └─ <alloc::alloc::Global as core::alloc::Allocator>::grow (1 samples)
   │                 │                                └─ alloc::alloc::Global::grow_impl (1 samples)
   │                 │                                   └─ alloc::alloc::realloc (1 samples)
   │                 │                                      └─ __rust_realloc (1 samples)
   │                 │                                         └─ <mozglue_static::GeckoAlloc as core::alloc::global::GlobalAlloc>::realloc (1 samples)
   │                 │                                            └─ realloc (1 samples)
   │                 │                                               └─ MozJemallocPHC::realloc(void*, unsigned long) (1 samples)
   │                 │                                                  └─ PageRealloc(mozilla::Maybe<unsigned long> const&, void*, unsigned long) (1 samples)
   │                 │                                                     └─ MozJemalloc::realloc(void*, unsigned long) (1 samples)
   │                 │                                                        └─ BaseAllocator::realloc(void*, unsigned long) (1 samples)
   │                 │                                                           └─ arena_t::Ralloc(void*, unsigned long, unsigned long) (1 samples)
   │                 │                                                              └─ arena_t::RallocSmallOrLarge(void*, unsigned long, unsigned long) (1 samples)
   │                 │                                                                 └─ idalloc(void*, arena_t*) (1 samples)
   │                 │                                                                    └─ arena_dalloc(void*, unsigned long, arena_t*) (1 samples)
   │                 │                                                                       └─ arena_t::DallocSmall(arena_chunk_t*, void*, arena_chunk_map_t*) (1 samples)
   │                 │                                                                          └─ arena_run_reg_dalloc(arena_run_t*, arena_bin_t*, void*, unsigned long) (1 samples) [self: 1]
   │                 └─ cssparser::parser::Parser::parse_until_before (2 samples)
   │                    └─ cssparser::parser::parse_until_before (2 samples)
   │                       └─ cssparser::parser::Parser::parse_entirely (2 samples)
   │                          └─ cssparser::rules_and_declarations::parse_qualified_rule::{{closure}} (2 samples)
   │                             └─ <style::stylesheets::rule_parser::TopLevelRuleParser as cssparser::rules_and_declarations::QualifiedRuleParser>::parse_prelude (2 samples)
   │                                └─ <style::stylesheets::rule_parser::NestedRuleParser as cssparser::rules_and_declarations::QualifiedRuleParser>::parse_prelude (2 samples)
   │                                   └─ selectors::parser::SelectorList<Impl>::parse (2 samples)
   │                                      └─ selectors::parser::SelectorList<Impl>::parse_with_state (2 samples)
   │                                         └─ cssparser::parser::Parser::parse_until_before (2 samples)
   │                                            └─ cssparser::parser::parse_until_before (2 samples)
   │                                               └─ cssparser::parser::Parser::parse_entirely (2 samples)
   │                                                  └─ selectors::parser::SelectorList<Impl>::parse_with_state::{{closure}} (2 samples)
   │                                                     └─ selectors::parser::parse_selector (2 samples)
   │                                                        └─ selectors::parser::parse_compound_selector (2 samples)
   │                                                           └─ selectors::parser::parse_one_simple_selector (2 samples)
   │                                                              ├─ <T as core::convert::Into<U>>::into (1 samples)
   │                                                              │  └─ <style::values::AtomIdent as core::convert::From<&str>>::from (1 samples)
   │                                                              │     └─ <style::gecko_string_cache::Atom as core::convert::From<&str>>::from (1 samples)
   │                                                              │        └─ Gecko_Atomize (1 samples)
   │                                                              │           └─ NS_Atomize(nsTSubstring<char> const&) (1 samples) [self: 1]
   │                                                              └─ cssparser::parser::Parser::parse_nested_block (1 samples)
   │                                                                 └─ cssparser::parser::parse_nested_block (1 samples)
   │                                                                    └─ cssparser::parser::Parser::parse_entirely (1 samples)
   │                                                                       └─ selectors::parser::parse_one_simple_selector::{{closure}} (1 samples)
   │                                                                          └─ selectors::parser::parse_functional_pseudo_class (1 samples)
   │                                                                             └─ selectors::parser::parse_inner_compound_selector (1 samples)
   │                                                                                └─ selectors::parser::parse_selector (1 samples)
   │                                                                                   └─ selectors::parser::parse_compound_selector (1 samples)
   │                                                                                      └─ selectors::parser::parse_one_simple_selector (1 samples)
   │                                                                                         └─ cssparser::parser::Parser::next_including_whitespace (1 samples)
   │                                                                                            └─ cssparser::parser::Parser::next_including_whitespace_and_comments (1 samples)
   │                                                                                               └─ cssparser::tokenizer::Tokenizer::next (1 samples)
   │                                                                                                  └─ cssparser::tokenizer::next_token (1 samples)
   │                                                                                                     └─ cssparser::tokenizer::consume_ident_like (1 samples)
   │                                                                                                        └─ cssparser::tokenizer::Tokenizer::advance (1 samples) [self: 1]
   └─ mozilla::dom::ConvertJSValueToString<mozilla::dom::binding_detail::FakeString<char> >(JSContext*, JS::Handle<JS::Value>, mozilla::dom::StringificationBehavior, mozilla::dom::StringificationBehavior, mozilla::dom::binding_detail::FakeString<char>&) (1 samples)
      └─ _Z14AssignJSStringIN7mozilla3dom14binding_detail10FakeStringIcEETnPNSt3__19enable_ifIXsr3std7is_sameINT_9char_typeEcEE5valueEvE4typeELPv0EEbP9JSContextRS7_P8JSString (1 samples)
         └─ JS_EncodeStringToUTF8BufferPartial(JSContext*, JSString*, mozilla::Span<char, (unsigned long)18446744073709551615>) (1 samples)
            └─ JSString::encodeUTF8Partial(JS::AutoRequireNoGC const&, mozilla::Span<char, (unsigned long)18446744073709551615>) const (1 samples)
               └─ mozilla::ConvertUtf16toUtf8Partial(mozilla::Span<char16_t const, (unsigned long)18446744073709551615>, mozilla::Span<char, (unsigned long)18446744073709551615>) (1 samples)
                  └─ encoding_mem_convert_utf16_to_utf8_partial (1 samples)
                     └─ encoding_rs::mem::convert_utf16_to_utf8_partial (1 samples)
                        └─ encoding_rs::utf_8::convert_utf16_to_utf8_partial_inner (1 samples)
                           └─ encoding_rs::ascii::basic_latin_to_ascii (1 samples)
                              └─ encoding_rs::ascii::basic_latin_to_ascii_stride_neither_aligned (1 samples)
                                 └─ encoding_rs::simd_funcs::load8_unaligned (1 samples)
                                    └─ core::intrinsics::copy_nonoverlapping (1 samples) [self: 1]

